@using TestProject.Extentions@model PaginatedList<TestProject.Models.Trip>@{    ViewData["Title"] = "Пътешествия";}<div class="container">    <div class="page-header">        <h1>Пътешествия</h1>        @if (User.IsInRole("Driver") || User.IsInRole("Admin"))        {            <a asp-action="Create" asp-route-returnUrl="@Context.Request.Path" class="create-trip-btn">                <i class="fas fa-plus-circle"></i> Създай ново пътешествие            </a>        }    </div>    <!-- Combined Search and Sort Form -->    <div class="search-form">        <div class="search-form-header">            <h2 class="search-form-title">Търсене и филтриране </h2>            <!-- Sorting Dropdown -->            <div class="form-group" style="min-width: 200px; margin-left: 10px;">                <form asp-action="Index" method="get" id="sortForm">                    <input type="hidden" name="startPosition" value="@ViewBag.CurrentStartPosition" />                    <input type="hidden" name="destination" value="@ViewBag.CurrentDestination" />                    <input type="hidden" name="returnUrl" value="@ViewBag.ReturnUrl" />                    <select name="sortOrder" asp-items="@(new SelectList(ViewBag.SortOptions as IEnumerable<SelectListItem>, "Value", "Text", ViewBag.CurrentSortOrder))" onchange="this.form.submit()" class="form-control">                    </select>                </form>            </div>        </div>        <form asp-action="Index" method="get" id="tripSearchForm">            <input type="hidden" name="returnUrl" value="@ViewBag.ReturnUrl" />            <input type="hidden" name="sortOrder" value="@ViewBag.CurrentSortOrder" />            <div class="search-form-row">                <div class="form-group">                    <label>Стартираща позиция:</label>                    <input type="text" name="startPosition" value="@ViewBag.CurrentStartPosition" class="form-control" placeholder="Въведете начална позиция" />                </div>                <div class="form-group">                    <label>Дестинация:</label>                    <input type="text" name="destination" value="@ViewBag.CurrentDestination" class="form-control" placeholder="Въведете дестинация" />                </div>                <div class="search-buttons">                    <button type="submit" class="btn btn-primary">                        <i class="fas fa-search"></i> Потърси                    </button>                    <button type="button" class="btn btn-secondary" onclick="clearSearch()">                        <i class="fas fa-times"></i> Изчисти                    </button>                </div>            </div>        </form>    </div>    <partial name="_TripTablePartial" model="Model" />    <div class="pagination">        <!-- Previous Button -->        @if (Model.HasPreviousPage)        {            <a asp-action="Index" asp-route-startPosition="@ViewBag.CurrentStartPosition" asp-route-destination="@ViewBag.CurrentDestination" asp-route-sortOrder="@ViewBag.CurrentSortOrder" asp-route-pageNumber="@(Model.PageIndex - 1)" class="pagination-btn">                <i class="fas fa-chevron-left"></i> Предишна            </a>        }        else        {            <button disabled class="pagination-btn">                <i class="fas fa-chevron-left"></i> Предишна            </button>        }        <!-- Page Numbers -->        @for (var i = 1; i <= Model.TotalPages; i++)        {            <a asp-action="Index" asp-route-pageNumber="@i" asp-route-startPosition="@ViewBag.CurrentStartPosition" asp-route-destination="@ViewBag.CurrentDestination" asp-route-sortOrder="@ViewBag.CurrentSortOrder" class="pagination-btn @(i == Model.PageIndex ? "active" : "")">                @i            </a>        }        <!-- Next Button -->        @if (Model.HasNextPage)        {            <a asp-action="Index" asp-route-startPosition="@ViewBag.CurrentStartPosition" asp-route-destination="@ViewBag.CurrentDestination" asp-route-pageNumber="@(Model.PageIndex + 1)" asp-route-sortOrder="@ViewBag.CurrentSortOrder" class="pagination-btn">                Следваща <i class="fas fa-chevron-right"></i>            </a>        }        else        {            <button disabled class="pagination-btn">                Следваща <i class="fas fa-chevron-right"></i>            </button>        }    </div></div>@section Scripts {    <script>        function clearSearch() {            // Clear only search fields            $('input[name=startPosition]').val('');            $('input[name=destination]').val('');            document.getElementById("tripSearchForm").submit();        }    </script>}